<!-- build time:Sun Feb 18 2024 02:04:43 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="·恆 ·極 ·諭" href="https://ekkoxiao.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="·恆 ·極 ·諭" href="https://ekkoxiao.github.io/atom.xml"><link rel="alternate" type="application/json" title="·恆 ·極 ·諭" href="https://ekkoxiao.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://ekkoxiao.github.io/2024/01/29/cs/safety/safety/"><title>计算机网络安全技术课程笔记 - 网络安全技术 - 计算机专业课程笔记 | Homepage for EkkoXiao = ·恆 ·極 ·諭 = 鹿车自泰然，凤翔岂雀雁</title><meta name="generator" content="Hexo 7.1.1"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">计算机网络安全技术课程笔记</h1><div class="meta"><span class="item" title="创建时间：2024-01-29 17:06:51"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-01-29T17:06:51+08:00">2024-01-29</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>17k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>16 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Homepage for EkkoXiao</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="/assets/safety.png"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/cs/" itemprop="item" rel="index" title="分类于 计算机专业课程笔记"><span itemprop="name">计算机专业课程笔记</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/cs/safety/" itemprop="item" rel="index" title="分类于 网络安全技术"><span itemprop="name">网络安全技术</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://ekkoxiao.github.io/2024/01/29/cs/safety/safety/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Linxin Xiao"><meta itemprop="description" content="鹿车自泰然，凤翔岂雀雁, Tsinghua University, Peking"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="·恆 ·極 ·諭"></span><div class="body md" itemprop="articleBody"><h2 id="无处不在的通信"><a class="anchor" href="#无处不在的通信">#</a> 无处不在的通信</h2><p>通信的基本要素：信源、信道、信宿<br>“三网合一” 中的三网就是计算机网络、电信网和有线电视网<br>ARPANET：分组交换，存储转发<br>现代计算机网络互连阶段特征是网络体系结构的形成和网络协议的标准化<br>采用标准统一的 TCP/IP 协议，标志着互联网 Internet 的诞生<br>通信子网：通信链路和网络节点<br>资源子网：计算机系统<br>电信网：电报，电话，无线电报，移动电话<br>漏洞挖掘 - 代码编写 - 信息窃取 - 信息贩卖 - 诈骗（社会工程学）<br>信息窃取攻击：蛮力破解，中间人攻击，拒绝服务攻击（存在最多），病毒恶意软件<br>蛮力破解：衍生出字典文件，将人们常用的密码组合作为探测口令；撞库攻击，使用相同信息登录大型信息系统<br>中间人攻击：监听，篡改<br>拒绝服务攻击：SYN 洪泛 (SYN flood) / UDP 洪泛 (UDP flood) / DNS 反射攻击<br>安全防护技术：加密解密，访问控制和身份认证，防火墙，防病毒，补丁技术</p><h3 id="enigma"><a class="anchor" href="#enigma">#</a> Enigma</h3><p>反射器虽然没有像转轮那样增加可能的不重复的方向，但是它可以使译码的过程和编码的过程完全一样，大大的提高了使用的简洁性，并不转动<br>增加强度：设计连接板，让使用者用一根信号线将某一个字母和另外一个字母任意连接，至多有六根<br>在 Enigma 的连接板上两两交换 6 对字母的可能性数目非常巨大，有 100391791500 种，计算为：<br>[ \frac<ruby>C(26, 2) \times C(24, 2) \times C(22, 2) \times C(20, 2) \times C(18, 2) \times C(16, 2)}{2<rp>(</rp><rt>6 \times 6!</rt><rp>)</rp></ruby>]</p><h2 id="密码学基础"><a class="anchor" href="#密码学基础">#</a> 密码学基础</h2><p>广泛使用的两种加密形式是传统加密和公钥加密；<br>传统加密：对称加密、单钥加密，不适合大规模大变动组织<br>现代加密：非对称加密、公钥加密<br>密码编码学：研究各种加密方案的学科<br>特征一、转换明文为密文的运算类型；<br>置换是将明文中的元素重新排列，代换是将明文中每个元素映射成为另外一个元素，所有的运算都是可逆的<br>特征二、所用的密钥数<br>双方使用相同密钥，对称密码；不同密钥，公钥密码<br>特征三、处理明文的方法<br>分组 / 块密码，每次处理一个分组；流 / 序列密码，连续处理<br>无条件安全：无论有多少可以使用密文，都不足以唯一地确定由该体制产生密文所对应的明文<br>计算上安全：破译密码的代价大于加密数据本身的价值，破译密码的时间超过了密文信息的生命期<br>大事件：1976 年公钥密码体制，1977 年 DES 标准</p><h3 id="古典密码-代换技术"><a class="anchor" href="#古典密码-代换技术">#</a> 古典密码 - 代换技术</h3><p>Caesar 密码：每个字母用它之后第三个字母代换（单表代换）<br>密钥词密码：设一个密钥词放在前面，其余字母按顺序（单表代换）<br>Playfair 密码：基于一个由密钥词构成的 5×5 字母矩阵，两个字母对的代换（多表代换）<br>Hill 密码：将 m 个连续的明文字母代换成 m 个密文字母，由 m 个线性等式决定，C = KP mod 26<br>Vigenere 密码：包括了 26 行字母表，每一行都由前一行向左偏移一位得到，密钥确定某个字母使用哪一行代换<br>Verman 密码：选择与明文毫无统计关系并且和明文一样长的密钥，其运算是基于二进制数据而非字母的<br>一次一密：使用与消息一样长且无重复的随机密钥来加密消息，无条件安全的</p><h3 id="古典密码-置换技术"><a class="anchor" href="#古典密码-置换技术">#</a> 古典密码 - 置换技术</h3><p>是把消息一行一行写成矩形块，然后按列读出，同时把列的次序打乱；列的次序就是算法的密钥<br>多步置换</p><h3 id="古典密码-破译"><a class="anchor" href="#古典密码-破译">#</a> 古典密码 - 破译</h3><p>穷举法<br>频率分析法：利用语言的统计特性（单码，双码，多码）</p><h3 id="对称密码"><a class="anchor" href="#对称密码">#</a> 对称密码</h3><p>加密解密使用相同的密钥，密钥必须使用秘密的信道分配<br>SDES—— 重点，见 PPT<br>Feistel 密码结构 —— 现在使用的对称分组密码算法都基于 Feistel 分组密码结构；<br>建议交替使用代换和置换，混淆和扩散（香农）<br>扩散：使明文的统计特征消散在密文中，让每个明文数字尽可能地影响多个密文数字<br>混淆：尽可能地使密文和加密密钥间的统计关系更复杂，以挫败推导出密钥的企图<br>每轮迭代都有相同的结构：代换作用在数据左半部分，通过轮函数 F 作用在数据的右半部分后，与左半部分进行异或来完成；代换之后，交换数据的左右两半完成置换</p><p>DES 算法：分组加密，对称密钥<br>首先把明文分成以 64 bits 为单位的块 m，执行初始置换 IP，16 轮迭代 Ti，末尾置换 IP-1<br>56 bits 的密钥分成两部分，Ci，Di，各 28bits，每一轮循环左移后压缩置换（56 位取 48 位），得到每一轮的密钥<br>对于每一轮迭代分为左右两个 32 位，经过 E 盒扩展置换（32 位扩展到 48 位），S 盒代换选择，P 盒置换步骤<br>E 盒目的：输入的一位影响下一步的两个替换，使得输出对输入的依赖性传播得更快，密文的每一位都依赖于明文的每一位<br>现在，5000$ 的计算机，可以在 3.5 小时找到密钥</p><p>最重要的几种对称密码算法，3DES、Blowfish 和 RC5，AES 不是 Feistel 结构，每一轮都使用代换和置换并行的处理整个数据分组（而不是左右分组）<br>3DES：两个密钥 k1 k2（或三个），三轮 DES，C = Ek1 [Dk2 [Ek1 [P]]]<br>BlowFish：与古典 Feistel 结构不同，Blowfish 算法每轮运算都是对数据的左右两个部分同时执行运算（左右均经过异或，DES 中下一轮的 L 不再是上一轮的 R），使用可变长度的密钥初始化方法<br>RC5：密钥长度可取 0~2040 位，最长（BlowFish 最长 448）<br>AES：分组长度 128 位，密钥长度 128 位；每一轮开始 —— 与当前轮密钥异或 —— 字节代换 —— 行移位 —— 列混淆；密钥被扩展成 44 个 32 位字所构成的数组 w [i]；仅在轮密钥加阶段使用密钥（一种 Verman 算法）<br>补充：行移位，将数据块划分为 4x4 的字节矩阵，对这个矩阵的行进行循环移位操作，目的是提高数据的扩散性；列混淆，在行移位之后，每一列都会通过一个特定的数学变换进行混淆，提高扩散性和混淆性<br>多种对称密码算法概述 —— 见 PPT<br>BlowFish，RC5 的密钥扩展阶段都使用了加法，RC5 没有用到 S 盒，使用的是一种基于加法、异或和循环左移的混合操作</p><p>问题：1. 必须经过安全的信道分配；2. 不能数字签名；3. O (n^2) 的数量管理复杂</p><h3 id="公钥密码"><a class="anchor" href="#公钥密码">#</a> 公钥密码</h3><p>基于数学函数而不是代换和置换<br>公钥公开，用于加密和验证签名；私钥保密，用作解密和签名<br>任何时刻，系统都可以改变自己的私钥，而公布相应的公钥代替原来的公钥<br>对于消息，A 向 B 发送消息，用 B 的公钥加密；B 收到密文后，用自己的私钥解密<br>对于验证，A 向 B 发送消息，用 A 的私钥加密 (数字签名)；B 收到密文后，用 A 的公钥解密 (验证)<br>陷门单向函数：在不知陷门信息下求逆困难的函数，当知道陷门信息后，求逆是易于实现的<br>需要大量计算，仅限于密钥管理（交换协商对称的对话密钥）和签名这类应用中<br>传统密码中与密钥分配中心的握手是一件异常麻烦的事情，而公钥密码实现密钥分配则是非常简单的（错误）<br>RSA 算法和 DH 算法 —— 重点，见 PPT<br>RSA：蛮力攻击，数学攻击，计时攻击（通过记录计算机解密消息所用的时间来确定私钥）<br>DH：只用于密钥交换，有效性在于计算离散对数非常困难<br>DSA：只能用于数字签名</p><h3 id="密钥分配-对称密码"><a class="anchor" href="#密钥分配-对称密码">#</a> 密钥分配 - 对称密码</h3><p>任何密码系统的强度都和密钥分配方法有关<br>链路加密：指在数据传输过程中，每个传输链路上的数据都被加密。在这种方式下，数据在传输过程中的每个节点（例如路由器或交换机）都会被解密然后重新加密。这意味着数据在从源头到目的地的过程中，每经过一个节点，都会进行一次解密和加密的过程。链路加密可以保护数据在特定链路上的传输安全，但是在每个节点上，数据都可能被暴露，因为节点需要对数据进行处理。<br>端到端加密：指数据从发送方加密后直到到达接收方之前都不会被解密，确保只有发送方和接收方能够访问原始数据内容。即使数据在传输过程中经过了多个中间节点，这些节点也无法解密数据内容。端到端加密防止了中间人攻击，即使数据被截获，攻击者也无法解读数据内容。<br>对于端到端加密，使用密钥分配中心 KDC 模式：<br>STEP1：A 向 KDC 请求一个会话密钥以保护与 B 的逻辑连接；消息中有 A 和 B 的标识以及一个临时交互号 N1；<br>STEP2：KDC 用 Ka 加密的消息做出响应；此时，A 可知：会话密钥 Ks；含 N1 的原始请求消息；用 Kb 加密了一次性会话密钥 Ks 和 A 的标识符 IDa ；<br>STEP3: A 存下会话密钥 Ks 备用，将 KDC 消息中的最后两项内容发给 B<br>层次式 KDC 密钥分配：使得主密钥分配的代价变小，将破坏集中在小区域内</p><h3 id="密钥分配-公钥分配"><a class="anchor" href="#密钥分配-公钥分配">#</a> 密钥分配 - 公钥分配</h3><p>公开发布 —— 容易伪造<br>公开可访问目录 —— 某个可信的实体或组织负责这个公开目录的维护和分配，&lt;姓名，公钥&gt;，一旦攻击者获得或者计算出管理员的私钥，带来的危险将很大<br>公钥授权 —— 只要用户之间通信，就必须向目录管理员申请对方的公钥，成为系统的瓶颈（A 从管理员获取后保存 B 公钥，并将 A 的表示和临时交互号 N1 发给 B，B 获取 A 公钥并核对临时交互号）<br>公钥证书 —— 证书包含着公钥和其它一些信息，只能由证书管理员产生和更新，并发给拥有相应私钥的通讯方，任何通信方可以读取证书并确定证书拥有者的姓名和公钥，与公钥授权的安全性相同；通信方读取证书后需要验证该证书出自证书管理员</p><h3 id="密钥分配-利用公钥分配传统密码的密钥"><a class="anchor" href="#密钥分配-利用公钥分配传统密码的密钥">#</a> 密钥分配 - 利用公钥分配传统密码的密钥</h3><p>公钥密码速度较慢，更适合作为传统密码中实现密钥分配的一种手段<br>简单的密钥分配：A 将 KUa 和 A 的表示发给 B，B 产生 Ks，用 KUa 加密后发给 A，即可得到；但是通信双方身份难以确定，容易受到主动攻击<br>具有保密性和真实性的密钥分配：已经交换了公钥，A 发送 IDA 和 N1 给 B，B 发送 N1，N2，A 发送 N2（交互号用于验证关系），A 选择 Ks，用自己的私钥和 B 的公钥加密后发送给 B，B 解密即可得到<br>也需要密钥分配中心 KDC</p><h2 id="认证技术"><a class="anchor" href="#认证技术">#</a> 认证技术</h2><p>认证 = 比较<br>网络环境中的攻击：泄密，传输分析，伪装，内容、顺序、计时修改，发送方、接收方否认<br>对付泄密、传输分析属于消息保密性范畴。<br>对付伪装、内容修改、顺序修改、计时修改属于消息认证范畴。<br>对付发送方否认可以使用数字签名。<br>对付接收方否认需使用数字签名和为抗击此类攻击而设计的协议。<br>消息认证就是验证所收到的消息确实是来自真正的发送方且未被修改的消息。<br>认证函数：产生认证符的函数；分为消息加密，消息认证吗 MAC，Hash 函数三类</p><h3 id="消息加密"><a class="anchor" href="#消息加密">#</a> 消息加密</h3><p>对称加密：发送方 A 用 A 和 B 共享的密钥 K，对发送到接收方 B 的消息进行加密<br>解决对称加密中消息认证的方法是要求明文具有某种易于识别的结构，这种结构可以是特定的格式、字段顺序、特殊的标记或者校验和等<br>加密前对每个消息附加一个错误检测码，也称之为帧校验序列 FCS 或者校验和<br>FCS 和加密函数的顺序是很重要的，如果先加密再计算 FCS，攻击者可以构造具有正确错误控制码的消息造成混淆<br>例子：TCP 协议<br>不能提供数字签名：接收方可以伪造信息，发送方可以否认信息</p><p>公钥加密：只提供保密性，不能提供认证，通过数字签名（用自己私钥加密）提供认证，加密到解密需要进行四次运算<br>防止发送方否认：接收方提供这个经过签名的消息作为证据，由于只有发送方的私钥能生成这个签名，因此可以证明消息的发送者<br>防止接受方否认：需要接受方提供回执</p><h3 id="消息认证码-mac"><a class="anchor" href="#消息认证码-mac">#</a> 消息认证码 MAC</h3><p>MAC 是消息和密钥的函数：MAC=Ck (M) K 是双方共享密钥，与加密过程的区别在于不要求可逆<br>因收发双方共享密钥，MAC 不能提供数字签名</p><h3 id="hash"><a class="anchor" href="#hash">#</a> Hash</h3><p>单向的 hash 函数是消息认证码的一种变形，并不使用密钥，它仅仅做为输入消息的函数，成为消息摘要（MD）<br>Hash 码是所有消息位的函数，它具有错误检测能力，消息任意改变都会导致 hash 码改变<br>(1) 用对称密码对消息及 hash 码加密：提供了保密性和认证<br>(2) 用对称密码仅对 hash 加密：提供认证，不提供保密<br>(3) 用发送方私钥对 hash 码加密：提供认证和数字签名（只有发送方可以产生加密后的 hash 码）<br>(4) 先用发送方私钥对 hash 码加密，再用对称密码中的密钥对消息和上述加密结果进行加密：提供认证、数字签名和保密性，常用<br>(5) 双方共享公共的秘密值 S：A 将 M 和 S 联接后再计算 hash 值，并将其附加在 M 后面，提供了认证<br>(6) 再对 (5) 用 Ks 加密：提供认证和保密性<br>如果不要求保证保密性，就可以不使用加密函数，从而减少计算代价<br>抗弱碰撞性：给定 m ，要找到 m’,m’≠ m 且 H (m) = H (m’) 是计算上不可行的<br>抗强碰撞性：寻找任何 (x,y) ，x ≠ y ，使得 H (x) = H (y) 是计算上不可行的</p><h3 id="hash函数"><a class="anchor" href="#hash函数">#</a> Hash 函数</h3><p>迭代 Hash 函数：典型的安全 hash 函数<br>将输入消息分为 L 个固定长度的分组，每个分组长度为 b 位，最后一个分组不足 b 位时，需要填充成 b 位<br>压缩函数 f：输入是前一步中得出的 n 位结果（即连接变量）和一个 b 位分组，输出一个 n 位分组，通常 b&gt;n<br>如果压缩函数具有抗碰撞能力，那么迭代 hash 函数也具有抗碰撞能力<br>MD5：512 位分组，缓冲区 128 位；找到两条 hash 码相同的消息的代价是 2^64 数量级，找到具有给定摘要的消息所需代价为 2^128 数量级<br>填充比特：即填充后的消息比 512 的整数倍少 64 位，再用 64 位表示填充前的报文长度，附加填充比特的后面<br>初始化 MD 缓存：4 个 32 位的寄存器 ABCD<br>压缩函数：四轮运算，输入为 512 位分组和 128 位缓冲区寄存器，使用 64 项的随机矩阵 T [i]= 2^32 abs (sin (i))，每轮使用 16 个元素<br>每一轮对 ABCD 进行 16 步迭代，每一步迭代类似 b ← a + ((a + g (b,c,d) + X [k] + T [i]) &lt;&lt;&lt; s)，g 为一个基本逻辑函数（四选一，每轮一个），其中 a 随步数变化；X [k] 为 512 位的第 k 个 32 位字，而 k 是一个预定的非线性顺序索引；迭代结果与前一步相加<br>（MD4，三轮运算，每轮使用的加法常量（即 T [i]）相同且第一轮不用，只使用三个基本逻辑函数，迭代结果不与前一步相加）</p><p>SHA-1：512 位分组，缓冲区 160 位，2^63 碰撞攻击代价<br>填充方法与 MD4/5 相同，初始化使用五个 32 位寄存器 ABCDE<br>将块分成 16 个 32 位的字，扩展这 16 个字为 80 个 32 位的字，进行 80 步迭代（四轮，每轮 20 步，四个基本逻辑函数），每轮更新 ABCDE 五个寄存器的值，结束后与之前轮结果相加</p><p>RIPEMD-160：512 位分组，缓冲区 160 位<br>由十轮运算组成的压缩函数是算法的核心，十轮运算分成两组，每组五轮（五个基本逻辑函数），每轮执行 16 步迭代<br>三者对比 —— 见 PPT，困难程度递增<br>MD5 和 RIPEMD-160 采用低位在前结构，SHA-1 采用高位在前结构</p><h3 id="数字签名算法dss"><a class="anchor" href="#数字签名算法dss">#</a> 数字签名算法 DSS</h3><p>消息认证不能处理通信双方自身发生攻击（发送方否认，接收方伪造）<br>直接数字签名只涉及通信双方（自己私钥加密），方法的有效性依赖于发送方私钥安全性<br>仲裁数字签名：从 X 到 Y 的每条已签名的消息都先发给仲裁者 A，A 对消息及其签名进行检查以验证消息源及其内容，然后给消息加上日期，并发给 Y，同时指明该消息已通过检验<br>DSS 使用 SHA-1 算法，给出了一种新的数字签名方法，即数字签名算法 DSA<br>DSS 不能用于加密或者密钥分配，只提供数字签名功能<br>DSS 使用 hash 函数，hash 码和随机数 k 作为数字签名函数 Sig 的输入，签名函数依赖于发送方的私钥 KRa 和一组通信伙伴共同拥有的参数构成的全局公钥 KUG；签名由两部分构成：s 和 r，发送消息位 M+s+r<br>接收方对接收到的消息 M 产生 hash 码，这个 hash 码和签名（s+r）一起作为验证函数 Ver 的输入，验证函数依赖于全局公钥 KUG 和发送方公钥 KUa；若验证函数的输出等于签名中的 r，则签名有效</p><h3 id="电子身份认证"><a class="anchor" href="#电子身份认证">#</a> 电子身份认证</h3><p>HTTP 是面向一次连接的无状态网络协议<br>HTTP 的 Basic 认证：在每次发出 HTTP 请求时，把用户身份凭证的明文发送到服务器端，服务器与存储在服务器端的用户凭证进行比较；对账号口令（U,P）进行 Base64 编码，发送到 Web 服务器端，服务器比较后确认用户身份<br>补充：Base64 是一种基于 64 个可打印字符来表示二进制数 (8Bit) 的方法<br>缺点：易于被监听、盗取，安全性低；本地需要存储账号口令；每个请求都要经过服务器处理，效率低</p><p>改进：账号口令密文传输，无法躲避重放攻击 —— 采用挑战 / 响应 (Challenge/Response) 机制，两次 HTTP 请求，先由服务器发送随机的挑战码 M，客户端抽到后使用 M 计算出一个响应值作为凭据，再使用 MAC 认证发送 MAC 码<br>基于表单的身份认证：当某个 Session 首次启用时，服务器会产生一个唯一的标识符发送到客户端，客户端收到后会存储下来；在 Session 存活期间，客户端每次向服务器发送的 HTTP 请求都会包含上述唯一标识符，使得服务器能够把前后多次请求关联起来<br>改进：引入 Challenge/Response 机制，Challenge 码 M 用（k = 口令）计算 Ek [M||U]，服务器用相同的手段计算，相同则验证成功<br>通常在静态口令的基础上加上其他因素的认证方式，形成双因素认证或多因素认证方式<br>常见不安全做法：账号口令（或其加密形式）存 cookie，如果一定要使用，加密过程中内容加上时间戳 t</p><p>手机口令：短信<br>动态口令：基于时间同步，每隔一段时间更新（计算时包含时间戳对区间除法的取整）<br>USB KEY：USB 接口的硬件设备，私钥不可导出，仅能用于内置的加密或签名运算<br>数字证书：权威机构发行，最简单包含一个拥有者的公钥、名称和证书授权中心的数字签名；数字证书拥有者对应的私钥应该另外妥善存储</p><h2 id="计算机网络安全体系结构"><a class="anchor" href="#计算机网络安全体系结构">#</a> 计算机网络安全体系结构</h2><p>安全目标：CIA<br>Confidentiality：保密性、机密性<br>Integrity：完整性<br>Availability：可用性<br>安全服务：认证服务 Authentication，保密服务 Confidentiality，数据完整性服务 Integrity，访问控制服务 Access Control，抗抵赖服务 Non-repudiation，可用性服务 Availability<br>安全机制：普通安全机制（不属于任何协议层或者安全服务）和特定安全机制（在特定的协议层实现的安全机制）<br>加密机制、通信业务流量填充机制（通过在传输的数据中插入一些额外的、无意义的数据（填充数据），使得外部观察者难以区分实际有用的数据和填充数据，从而保护数据的隐私性）；访问控制机制、数据完整性机制；认证交换机制、数字签名机制；路由控制机制、公证机制<br>安全性攻击分成两类：<br>主动攻击：试图改变系统资源或者影响系统运行。<br>被动攻击：试图了解或者利用系统的信息但不影响系统资源（窃听，流量分析）。</p><h3 id="无线局域网"><a class="anchor" href="#无线局域网">#</a> 无线局域网</h3><p>无线窃听：开放性信道导致信息泄露<br>假冒攻击：假冒用户身份<br>信息篡改：将窃听到的信息进行修改<br>重放攻击：攻击者复制有效的消息事后重新发送或重用这些消息以访问某种资源<br>重路由攻击：攻击者改变消息路由以便捕获有关信息<br>错误路由攻击：将消息路由到错误的目的地<br>删除消息：攻击者在消息到达目的地前将消息删除<br>网络泛洪：发送大量伪造的或无关消息从而使得 AP 忙于处理这些消息而耗尽信道资源和系统资源，拒绝服务</p><p>无加密认证：SSID 为每个 AP 配置标志名（wifi 名），只要使用者能够提出正确的 SSID，AP 就接受用户端的登入请求<br>有线等效保密协议 WEP：使用对称加密算法（RC4 流加密），无线 AP 首先启用 WEP 功能，创建密钥；然后在每个无线客户端启用 WEP，并输入该密钥（Challenge/Request 模式）<br>将 24 位初始化向量 IV 和 40 位共享密钥 K0 连接得到 64 位的数据，输入到虚拟随机数产生器中，产生一次性秘钥 KE；KE 与明文 P 和其 CRC32 校验的拼接异或，得到密文；密文在与初始化向量 IV 拼接发送<br>问题：各个设备与接入点共享一组默认密钥，且 RC4 容易被破译，也不含序列号，无法抵抗重放攻击；24 bits 的初始化向量 IV 明文发送，且过短，容易重复<br>完整性校验算法 CRC-32 是非加密的线性运算，主要用于检测消息中的随机错误，不是安全的杂凑函数，无法实现消息认证<br>WPA1：使用 TKIP 协议，动态变化每个数据包所使用的密钥，密钥长度 128 位，传送的每一个数据包都有独有的 48 位序列号，防范重放攻击；使用了称为 “Michael” 的更安全的消息认证码 MIC<br>IEEE 802.1x：基于客户 / 服务器模式，AP 会要求用户输入用户名和密码，再把这个用户名和密码送到验证服务器上去做验证；需要和上层认证协议 EAP 配合实现用户认证和密钥分发<br>WPA2：更安全的 CCMP 消息认证代替了 Michael 算法，AES 对称加密算法代替了 RC4 流密码</p><h3 id="vpn"><a class="anchor" href="#vpn">#</a> VPN</h3><p>用户不再需要拥有实际的长途数据线路，而是使用公众网络的长途数据线路动态组成<br>基于数据链路层的 VPN 解决方案：L2TP，在认证、数据完整性以及密钥管理具有严重缺陷<br>基于网络层的 VPN 解决方案：IPSec，认证，保密，密钥管理<br>基于传输层的 VPN 解决方案：SSL，SSL VPN 和 IPsec VPN 两种方案往往结合实行</p><h2 id="ipsec"><a class="anchor" href="#ipsec">#</a> IPSec</h2><p>现有 IP 协议：无连接，不保证顺序到达；存在重复包、丢失包；设备简单、无状态<br>IPsec 的原理在于可以在 IP 层加密和 / 或认证所有流量<br>IPsec 的实施：主机（能够针对用户的每个会话提供安全保障），防火墙（为内部所有的应用提供安全服务，不改变操作系统），路由器（对通过公用网络在两个子网之间流动的数据提供安全保护）</p><h3 id="ipsec-体系结构"><a class="anchor" href="#ipsec-体系结构">#</a> IPSec 体系结构</h3><p>RFC 2402 - 包认证，RFC 2406 - 包加密<br>IPSec 文档：体系结构，认证头 AH，封装安全载荷 ESP，加密算法，认证算法，密钥管理，解释域（DOI）<br>DOI：其他文档需要的为了彼此间互相联系的一些值，包括经过检验的加密和认证算法的标识以及操作参数，比如密钥的生存期<br>使用 AH 协议报头的认证协议和为数据包设计的加密 / 认证协议 ESP，提供安全性</p><p>安全关联 SA：一组安全信息参数集合，包括：协议、操作模式、密码算法、认证算法、密钥、密钥生存期等<br>关联是发送方和接收方之间的单向关系，如果需要双方安全交换，则建立两个安全关联<br>安全服务不能由 AH 和 ESP 两者都提供<br>SA 由三个参数唯一确定：<br>(1) 安全参数索引 SPI，由 AH 和 ESP 携带，使得接收方能够选择合适的 SA 处理接收包，仅在本地有意义<br>(2) IP 目的地址 IPDA，只允许使用单一地址，表示 SA 的目的地址<br>(3) 安全协议标识，AH/ESP</p><p>安全关联数据库 SADB，由三元组索引<br>SA 的参数包括<br>必须实现的：序列号计数器；序列号溢出标志；反重放窗口（计数器是否重复）；IPSec 协议模式（隧道，传输）；Path MTU<br>AH 必须实现 AH 信息组；ESP 必须实现 ESP 信息组；分别包括认证算法，密钥，密钥生存期等；其他：SA 的生存期</p><p>工作过程：对于收到的数据包，解析出三元组【SPI、目的地址、AH /ESP】，并据此查找 SADB；查找到则比较参数，不一致则丢弃；若未查找到，如果是输入包则丢弃，否则创建一个新的 SA 存入 SADB。</p><p>安全策略数据库 SPDB：至少包括定义 IP 流量子集的入口、指向该流量 SA 的指针（要保护的数据包类型和如何保护）<br>其每个入口由一个 IP 集合和上层协议定义，称为选择子，包括源目的地址 / 端口，用户标识，数据敏感性级别，协议等，用于筛选过滤出特定流量<br>每个 IP 包经过选择子的过滤在 SPDB 中选择匹配的入口，如果存在 SA，则选定 SA 何其关联的 SPI 执行 IPSec 处理<br>对于数据包的操作策略包括：Discard，bypass IPSec，apply IPSec（外发提供 + 接受默许）</p><p>传输模式：主要为上层协议提供保护，同时增加了 IP 包载荷的保护；ESP 仅加密（认证）IP 载荷，不处理 IP 报头；AH 认证载荷和报头选中部分（主机）<br>隧道模式：当 IP 包加上 AH/ESP 域后，整个数据包和安全域被当作一个新的 IP 载荷，并拥有一个新的外部 IP 报头；ESP 加密（认证）包括内部 IP 报头的整个载荷；AH 认证内部载荷和外部 IP 报头选中部分（防火墙，路由器）</p><h3 id="ah"><a class="anchor" href="#ah">#</a> AH</h3><p>支持数据完整性和 IP 包的认证，基于消息认证码 MAC，双方必须共享一个公钥<br>认证头由 Next Header，Payload Length，保留字，SPI（为 0 表示没有安全关联存在），序列号计数器（防范重放类型攻击），认证数据 AD（ICV 或 MAC）<br>当建立了一个新的 SA 时，发送方将序列号初值设为 0，每次在 SA 上发送一个包，则计数器加 1 并将值放入序列号域，则使用的第一个值就是 1；序列号达到 2^32-1 后，SA 必须中止，协商新的 SA<br>反重放攻击：接收方维护窗口，包到达之后，序号小于下边界则丢弃，第一次收到一个窗口中的包，验证通过后标记位置；如果收到已经标记过的包则丢弃；收到超过上边界的包且验证通过，则窗口前移<br>完整性校验值 ICV：包含在 AD 域，一种 MAC 或者 MAC 算法生成的截断代码（前 96bits）；<br>计算字段包括：IP 报头中传输过程中不变的部分和 AH SA 终点可以预测的部分（除去服务类型，报文分组域，TTL，Header CheckSum 这些可变部分），其余部分置为 0；AH 报头中 AD 域置 0 计算；上层协议数据全体<br>两种途径使用 IPSec：直接在服务器和客户工作站之间提供传输模式的认证（端到端，主机上）；在服务器不支持认证的情况下，远程工作站向防火墙证明自己身份，以便访问整个内部网络的时候，使用隧道模式 SA（防火墙或路由器上）<br>AH 对输入输出数据包的处理</p><h3 id="esp"><a class="anchor" href="#esp">#</a> ESP</h3><p>封装安全载荷由 SPI，序列号，padding，pad length，Next Header，AD 组成<br>载荷数据、填充数据 padding、填充长度 pad length 和邻接头域都在 ESP 中被加密。可用加密算法有：3DES、RC5、IDEA、CAST、Blowfish；支持使用默认为 96 位的 MAC<br>Padding 的功能：扩展明文长度；对齐；隐藏载荷的实际长度，并提供部分流量保护<br>传输模式：包括 ESP 尾和整个传输层分段的数据块被加密，块中的明文被密文替代，形成要传输的 IP 包；如果选择了认证，则加上认证（对加密后的数据计算认证码）；中间路由器不检查密文；目的节点利用 ESP 报头中的 SPI 解密包的剩余部分，恢复传输层分段数据<br>ESP 头和 ESP 尾之间传输层以上的数据，之后是 MAC，之前是 IP 头<br>隧道模式：ESP 加密对象包括 IP 头（即整个 IP 包），再添加新的 IP 头，更常用于建设虚拟专用网<br>ESP 对输入输出数据包的处理</p><h3 id="安全关联组合"><a class="anchor" href="#安全关联组合">#</a> 安全关联组合</h3><p>单个 SA 不能同时实现 AH 和 ESP<br>安全关联组合（安全关联束）是指提供特定的 IPsec 服务集所需的一个 SA 序列<br>传输邻接：不使用隧道的情况下，对一个 IP 包使用多个安全协议；组合 AH 和 ESP 的方法仅允许一级组合<br>[IP1][AH][ESP][upper]<br>隧道迭代：指通过 IP 隧道应用多层安全协议；由于每个隧道可以在路径上的不同 IPsec 节点起始和结束，因此该方法允许多层嵌套<br>[IP2][ESP][IP1][AH][IP0][upper]</p><h3 id="ike"><a class="anchor" href="#ike">#</a> IKE</h3><p>支持两种密钥管理类型：手工和自动<br>IKE 的精髓在于：永远不在不安全的网络上直接传送密钥<br>IKE (Internet Key Exchange) 协议为 IPsec 提供了自动协商交换密钥、建立安全关联 SA 的服务，简化了 IPsec 的使用和管理；解决了在不安全的网络环境中安全地建立或更新共享密钥的问题<br>核心技术是 DH 秘钥交换算法，使得 IKE 具备了完善的前向安全性 (指一个密钥被破解，并不影响其他密钥的安全性，这些密钥间没有派生关系)<br>不但可自动地为参与通信的实体协商安全关联 SA，还可以维护安全关联数据库 SADB<br>IKE == “ISAKMP 格式 + Oakley 模式 + SKEME 密钥交换”<br>IKE 的报文格式继承自 ISAKMP，所以也称为 ISAKMP 报文<br>ISAKMP：UDP 的 500 端口，在任何传输层和 IP 层上实现，由一个定长的报文头和不定数量的载荷组成<br>发起者 Cookie + 应答者的 Cookie：唯一标识一个密钥交换会话和该会话生成的 IKE SA<br>Next Payload：报文第一个载荷类型，Exchange Type：密钥交换类型，Flags：8 位，只定义了最低三位 —— 加密位，约束位（如果置为 1 需要等待 ACK 才能安全通信），认证位（1：有认证，0：没有加密仅认证）<br>Message ID：第二阶段密钥协商的发起者生成，标志一个第二阶段密钥协商会话；Total Message Length：总长度<br>13 种载荷：均为 Next Payload (8)+Reserved (8)+Payload Length (8)+Payload</p><h3 id="ike-体系结构"><a class="anchor" href="#ike-体系结构">#</a> IKE 体系结构</h3><p>两个阶段：第一阶段，协商创建一个通信信道（IKE SA），并对该信道进行验证；第二阶段，使用已建立的 IKE SA 建立 IPsec SA<br>第一阶段中，可以使用主模式（提供对通信双方的身份保护）或积极模式（不必要身份保护）<br>主模式：SA 交换，密钥交换，身份和交换验证（2+2+2）<br>消息 1：发起方策略，此时的接受方 Cookie 为 0，报文载荷包括 SA，Proposal，Transform<br>消息 2：接受方确认策略，设置接受方 Cookie，其余类似消息 1<br>补充：SA 载荷由解释域 DOI 开始，之后会跟随一个或多个提议（Proposals，包含协议内容及其变换列表）和变换（Transforms，提议附带，包含算法等），定义了安全关联的具体参数<br>在协商之前，发起者和响应者必须计算产生 cookie，用于唯一的标识每个单独的协商交换过程<br>消息 3：发起方密钥生成信息，包含了 Key Exchange 载荷和 Nonce 载荷，KE 载荷包含发起者的 DH 公钥，Nonce 载荷为大随机数防止重放攻击<br>消息 4：接受方密钥生成信息，同消息 3，KE 为接受者的 DH 公钥<br>消息 5：发起方身份和验证数据，包含标识载荷 ID 和散列载荷 Hash，加密传输<br>消息 6：接受方身份和验证数据，载荷类似<br>ID 载荷包含了发起者的标识信息，IP 地址或者主机名；Hash 载荷包含对上一过程中产生的三组密钥进行 Hash 运算得出的值<br>如果双方在消息 5 和消息 6 中的散列载荷中的 hash 值相同，那么双方的认证成功<br>cookie 使用源 / 目的 IP 地址、随机数字、日期和时间等信息进行 MD5 计算，其结果写入 ISAKMP 报文头的 “cookie” 域中</p><p>快速模式：主模式只能采用 IP 地址作为 ID 进行协商，不能够应用于 IP 地址动态变化的情况<br>发起方：发送本地 IKE 策略，密钥生成信息；相应方：查找匹配的策略，密钥生成；发起方：接受对方确认策略，密钥生成并发送身份验证数据（3 步）<br>消息 1：交换 SA、KEY、Nonce 和 ID 等载荷<br>消息 2：在响应消息 1 内容的同时，增加了 Hash 认证（响应方计算好几个密钥，然后使用这些密钥以及其他信息计算 hash 值）<br>消息 3：根据消息 2 的 Hash 计算，如果一致再计算一个新的 Hash 值，加载在消息 3，响应方重新计算一致，认证完成<br>第二阶段使用快速模式，为 IPsec AH 和／或 IPsec ESP 协商安全参数（加密算法，哈希算法，验证方法，DH 组，存活周期，密钥长度等等）<br>一个 IKE SA 协商（第一阶段）可为多个 IPsec SA 协商（第二阶段）提供服务<br>（IPSec SA 是单向的，这意味着保护数据流的每个方向（入站和出站）都需要一个单独的 IPSec SA；因此，通常至少需要两个 IPSec SAs 来保护双向通信）</p><h3 id="ike-工作"><a class="anchor" href="#ike-工作">#</a> IKE 工作</h3><p>端节点到端节点：采用传输模式，IP 头与数据间插入 IPsec 头，用来保护数据载荷<br>安全网关到安全网关：采用隧道模式<br>假设一个便携漫游用户通过 IPsec 保护的隧道连接回自己的协作网络，在这种情况中，数据包将使用隧道模式：<br>从便携漫游用户节点出来的数据包的外部 IP 头将包含和其当前位置相关 的 IP 地址，而内部 IP 头将包含由安全网关赋予的源 IP 地址；外部目的地址总是安全网关的地址，而内部目的地址会是数据包的最终地址<br>IKE 在协议实现上，是以守护进程的方式在后台运行<br>两种方式：内核提交请求；同级 IKE 守护进程提交请求<br>IPSec 先查询 SPDB（保存在内核），对应到相应的 SA，再检查 SADB，如果没有 SA 通过内核提交请求<br>IKE 守护进程接收到内核发来的请求后，查询 SPDB，得到所有协商参数；然后向远程 IKE 进程发出协商请求；IKE 进程开始协商<br>删除 SA 也通过 IKE 守护进程协商删除，远程的 IKE 进程可以选择直接删除或者忽略（但是不允许使用）</p><h2 id="传输层安全协议ssl"><a class="anchor" href="#传输层安全协议ssl">#</a> 传输层安全协议 SSL</h2><p>工作在 TCP 协议上，可用于保护正常运行于 TCP 之上的任何应用层协议，与具体的应用层协议无关<br>为端到端的应用提供保密性、完整性、身份认证<br>两个实体：客户机 + 服务器<br>两个概念：会话（Session）+ 连接，会话通过握手协议建立，可以由多个连接共享；一次访问中可能需要多个连接，共享同一个会话协商的密码算法、主密钥等信息<br>两层协议：握手协议 + 记录协议<br>SSL 协议由 SSL 记录协议（定义传输格式，为高层协议提供数据封装、压缩、加密等基本功能）；SSL 握手协议（协商密钥，在数据传输前，进行身份认证、协商加密算法、交换密钥等）；SSL 告警协议；SSL 修改密码规约协议</p><h3 id="记录协议"><a class="anchor" href="#记录协议">#</a> 记录协议</h3><p>保密性：使用 SSL 握手协议定义的共享密钥 (shared secrete Key)，用传统密钥算法对 SSL 载荷进行加密；<br>报文完整性：用握手协议定义的共享密钥 (secrete) 计算报文认证码 (MAC)</p><p>操作过程：（对上层报文）分段，压缩（可选），增加 MAC，加密（对压缩报文加上 MAC 进行加密），增加首部（内容类型 (8bit)，主要版本 (8bit)，次要版本 (8bit)，压缩长度 (16bit)），形成 SSL 记录协议数据单元</p><h3 id="握手协议"><a class="anchor" href="#握手协议">#</a> 握手协议</h3><p>在传递应用数据之前使用<br>允许客户端和服务器端相互认证、协商加密和 MAC 算法，保护数据使用密钥通过 SSL 记录传送<br>功能包括：协商密码算法；协商主会话密钥；C/S 相互认证，先认证 Server，Client 的认证可选<br>报文格式：类型 (1)：指示 10 种报文中的一个；长度 (3)：以字节为单位的报文长度；内容 (&gt;=1)：和这个报文有关的参数<br>四个阶段：<br>(1) 建立安全能力：客户向服务器发送 client_hello，服务器发送 server_hello（参数相同，包括密钥交换方法，加密算法，MAC 算法，压缩算法等）<br>(2) 服务器认证和密钥交换：服务器发送其 SSL 数字证书 Certificate；<br>如果密钥交换算法使用匿名 DH 算法，就不需要服务器发送证书；<br>如果密钥交换算法使用 DH、RSA 等算法，需要发送 server_key_exchange 报文，用来交换密钥；服务器发送 sever_hello_done 报文，等待客户端响应；<br>可选：发出 certificate_request 报文，给出可以支持的客户端数字证书类型列表<br>(3) 客户认证和密钥交换：客户端验证 server 提供的证书是否有效，随后发送 client_key_exchange，包含 pre_master_secret 和消息认证码计算需要的密钥<br>（不直接发送 master_secret：避免被截获，那么整个会话的安全性都会受到威胁，增加随机性和复杂性）<br>可选：收到 certificate-request 则发送 Certificate 给服务器，同时发出签有客户端专用密钥的 certificate_verify，用来证明它实际上拥有与该证书关联的私钥<br>(4) 结束：客户端使用一系列加密运算将 pre_master_secret 转化为 master secret ，派生出用于加密和消息认证的所有密钥，客户端和服务器相继发出 change_cipher_spec 和 finished<br>客户端 change_cipher_spec：要求服务器转换为新协商的密码对；finished：在新算法、密钥下的报文，如果服务器能正确处理则能验证协商成功<br>服务器 change_cipher_spec：同上；finished：在新算法、密钥下的报文，让客户端也验证协商成功</p><h3 id="告警协议"><a class="anchor" href="#告警协议">#</a> 告警协议</h3><p>用于向对等实体传递 SSL 相关的警报，和使用 SSL 的其它应用一样，告警消息按照当前状态压缩和加密<br>每个消息由两个字节组成：第一个字节标识 1（告警）2（致命错误）；第二个字节包含了描述特定告警信息的代码</p><h3 id="修改密码规约协议"><a class="anchor" href="#修改密码规约协议">#</a> 修改密码规约协议</h3><p>在握手协议的结束阶段发送（change_cipher_spec），通知接收方，以后的记录将使用刚才协商的密码算法和密钥进行加密 / 认证<br>只有一种报文，只有一个字节，只有一个值 (1) 是有效的</p><h3 id="安全性"><a class="anchor" href="#安全性">#</a> 安全性</h3><p>为每次安全连接产生一个 128 位长的随机数 “连接序号”，防范 “重放攻击”<br>对应用层不透明，在涉及多方的电子交易中，SSL 协议并不能协调各方间的安全传输和信任关系</p><h2 id="http-ssl"><a class="anchor" href="#http-ssl">#</a> HTTP + SSL</h2><p>主动攻击包括伪装成其它用户、篡改客户和服务器之间的消息或者篡改 Web 站点的信息等<br>被动攻击包括在浏览器和服务器通信窃听、获得原来被限制使用的权限等<br>Web 的安全威胁：服务器安全，客户浏览器的安全，服务器和客户端之间的通信安全<br>流量安全方法：IP 级，TCP 级，应用级<br>HTTP 协议本身采用明文传输通信内容，并且对通信双方不做验证，完全无法防御中间人攻击<br>可能的攻击：监听嗅探，篡改劫持，伪造服务器，中间人攻击（整个会话都被攻击者完全控制，而且攻击者还可以拦截通讯双方的通话并插入新的内容）</p><h3 id="arp-欺骗"><a class="anchor" href="#arp-欺骗">#</a> ARP 欺骗</h3><p>工作在数据链路层，实现 MAC 地址与 IP 地址的映射<br>是一种中间人攻击的常用手段，攻击者可以通过制造伪造的 ARP frame (request, reply)，修改网内任何计算机的映射表，从而切断目标主机的网络通讯，窃取目标主机关键信息，导致出现了通信数据已经被篡改的现象<br>ARP 欺骗成功后，可以继续进行 DNS 欺骗<br>DNS 欺骗：攻击者向 DNS 服务器或客户端发送伪造的 DNS 响应，这些伪造的响应将域名解析到错误的 IP 地址，导致用户在尝试访问特定网站时被重定向到攻击者控制的服务器。</p><h3 id="https"><a class="anchor" href="#https">#</a> HTTPS</h3><p>HTTPS 是 HTTP 和 SSL/TSL 协议的合并，解决了数据加密、完整性校验、对服务器的身份认证等问题<br>HTTP 端口号为 80，HTTPS 端口号为 443<br>SSL 在 TCP 之上，HTTP 之下建立了一个加密通道，通过这一层的数据经过了加密（借助下层协议的的信道安全的协商出一份加密密钥）</p><p>HTTPS 协议依旧无法避免 ARP 欺骗和嗅探攻击，但是被嗅探到也无法得到明文信息<br>HTTPS 能够避免报文篡改（无法识别的密文无法篡改）<br>HTTPS 的加密证书是在证书管理机构申请后发放，所以拥有该证书的单位和个人是唯一的、不可被仿冒（地址栏的小锁）<br>某些使用 HTTP 的浏览器看起来会做网站身份验证，但是基于网站域名的，当遇到 DNS 劫持 / 欺骗时完全无法抵抗<br>当用户通过钓鱼 WIFI 或者恶意代理，导致服务器的证书被替换时，浏览器会给出提示<br>证书替换：攻击者使用自己的证书替换掉服务器的证书，通信过程就是用攻击者的证书进行加密，则对攻击者来说就是明文通信<br>会话劫持：如果登陆采用 HTTPS，则攻击者无法截取到登录的用户名和密码，但是在登录之后会跳转到 HTTP 页面，此时的会话保持如果采用的是 cookie 验证，攻击者可以偷取用户的 cookie 信息，从而不用输入用户名和密码，直接以用户身份登录</p><h3 id="ssl攻击"><a class="anchor" href="#ssl攻击">#</a> SSL 攻击</h3><p>SSLStrip：<br>通过中间人攻击监听 HTTP 流量；<br>当受害者尝试访问一个安全网站时，通常会通过 HTTP 连接，然后网站会通过重定向响应来引导用户到 HTTPS 加密连接。SSLStrip 会拦截这些重定向响应，并修改它们，使用户保持在 HTTP 连接上，而不是切换到 HTTPS；<br>与合法的服务器建立 HTTPS 连接，以建立信任；<br>更改响应内容中的超链接，替换 HTTPS 为 HTTP，并记录；<br>与用户进行 HTTP 通信，与服务器进行 HTTPS 通信（记录中本应是 HTTPS 的请求），从而明文获取用户信息</p><h2 id="set"><a class="anchor" href="#set">#</a> SET</h2><p>电子商务安全要求：数据传输的安全性，数据的完整性，身份验证，交易的不可抵赖（以通过时间戳、数字签名和数字证书等技术来实现）<br>电子商务安全：基本加密算法；以基本加密算法为基础的证书认证体系 CA 以及数字信封、数字签名等基本安全技术；以基本加密算法、安全技术、CA 体系为基础的各种安全应用协议<br>CA 认证体系：CA 证书标准；SET CA；为上层的安全应用协议提供证书认证功能<br>SET 协议是一种应用于互联网环境，以信用卡为基础的安全电子交付协议；通过 SET 协议可以实现电子商务交易中的加密、认证、密钥管理机制；对不用卡支付的交易方式则与 SET 无关。<br>关键特征：信息的机密性，数据的完整性，卡用户账号的认证，商家的认证。<br>参与方：发卡银行，持卡人，网上商家，支付网关，收款行，证书授权<br>数字信封：发送方使用接收方的公钥来加密对称密钥后所得的数据，其目的是用来确保对称密钥传输的安全性</p><h3 id="交易过程"><a class="anchor" href="#交易过程">#</a> 交易过程</h3><p>交易前认证：采用电子证书，持卡人（发卡机构发放），网上商家（商家金融机构产生，对应每个支付卡品牌），支付网关（持卡人从支付网关证书中获取其加密密钥，用于加密持卡人账号信息），收款 / 发卡行（从支付卡品牌接收）</p><p>购买请求：有四个报文组成 —— 发起请求、发起响应、购买请求和购买响应<br>发起请求：信用卡品牌，ID<br>发起响应：商家的交易号，证书（用商家的私钥加密）<br>这两个报文验证通过后生成以下交易具体信息：<br>PI：支付信息，金额，卡号等，发送给银行<br>OI：订购信息，发送给商家<br>PI 和 OI 必须分开加密和签名，以保证用户的隐私不被泄漏<br>双签名机制，重点 Dual Signature<br>生成：<br>● 客户用 Hash 函数对 PI 和 OI 进行散列处理，分别得到订购信息的消息摘要 OIMD 和支付信息的消息摘要 PIMD。<br>● 将两个消息摘要连接起来再用 Hash 函数进行散列处理，得到支付订购消息摘要 POMD。<br>● 客户用他的私钥加密 POMD，最后得到的就是经过双重签名的信息。<br>使用和认证：<br>● 客户将 “OI + PIMD + 双重签名” 发给商家，将 “PI + OIMD + 双重签名” 发给银行；<br>● 商家和银行对收到的信息先生成摘要，再与另一个摘要连接起来，如果它与解密后的双重签名（利用客户的公钥）相等，就可确定消息的真实性。<br>商家看不到顾客账户信息、银行不知道客户的购买信息，但都可确认另一方是真实的。<br>实际商家获取到的是 “PI + OIMD + 双重签名” 这些信息通过会话密钥 Ks 加密后的新 PI，以及用发卡行的公钥加密后的 Ks（数字信封），商家无法知道真正的 PI</p><p>支付授权：商家需要通过支付网关、发卡行得到授权，才能给用户发货，支付授权交换由两个报文组成 —— 授权请求和授权响应<br>授权请求：PI，双签名，Es（授权有关信息），客户和商家的证书<br>授权响应：与授权有关的信息 / 获取权标信息 / 证书<br>支付网关解密数字信封获得会话密钥，验证证书，验证双签名，验证 transiaction ID，从发卡行申请支付</p><p>支付获取：由获取请求和获取响应报文组成<br>获取请求报文由以下几部分组成：支付的数量、交易 ID、获取权标、商人的签名密钥、证书<br>获取响应报文由以下几部分组成：网关的签名、加密获取相应数据块、网关签名密钥证书</p><p>与 SSL 协议的比较</p></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-01-29 17:13:54" itemprop="dateModified" datetime="2024-01-29T17:13:54+08:00">2024-01-29</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Linxin Xiao <i class="ic i-at"><em>@</em></i>·恆 ·極 ·諭</li><li class="link"><strong>本文链接：</strong> <a href="https://ekkoxiao.github.io/2024/01/29/cs/safety/safety/" title="计算机网络安全技术课程笔记">https://ekkoxiao.github.io/2024/01/29/cs/safety/safety/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2024/01/29/cs/net/net/" itemprop="url" rel="prev" data-background-image="&#x2F;assets&#x2F;net.png" title="计算机网络原理课程笔记"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 计算机网络原理</span><h3>计算机网络原理课程笔记</h3></a></div><div class="item right"><a href="/2024/02/10/2024/" itemprop="url" rel="next" data-background-image="&#x2F;assets&#x2F;firework.jpeg" title="写在 2024 龙年的第一天"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>写在 2024 龙年的第一天</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E5%A4%84%E4%B8%8D%E5%9C%A8%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">1.</span> <span class="toc-text">无处不在的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#enigma"><span class="toc-number">1.1.</span> <span class="toc-text">Enigma</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%86%E7%A0%81%E5%AD%A6%E5%9F%BA%E7%A1%80"><span class="toc-number">2.</span> <span class="toc-text">密码学基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%A4%E5%85%B8%E5%AF%86%E7%A0%81-%E4%BB%A3%E6%8D%A2%E6%8A%80%E6%9C%AF"><span class="toc-number">2.1.</span> <span class="toc-text">古典密码 - 代换技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%A4%E5%85%B8%E5%AF%86%E7%A0%81-%E7%BD%AE%E6%8D%A2%E6%8A%80%E6%9C%AF"><span class="toc-number">2.2.</span> <span class="toc-text">古典密码 - 置换技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%A4%E5%85%B8%E5%AF%86%E7%A0%81-%E7%A0%B4%E8%AF%91"><span class="toc-number">2.3.</span> <span class="toc-text">古典密码 - 破译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E7%A7%B0%E5%AF%86%E7%A0%81"><span class="toc-number">2.4.</span> <span class="toc-text">对称密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81"><span class="toc-number">2.5.</span> <span class="toc-text">公钥密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%86%E9%92%A5%E5%88%86%E9%85%8D-%E5%AF%B9%E7%A7%B0%E5%AF%86%E7%A0%81"><span class="toc-number">2.6.</span> <span class="toc-text">密钥分配 - 对称密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%86%E9%92%A5%E5%88%86%E9%85%8D-%E5%85%AC%E9%92%A5%E5%88%86%E9%85%8D"><span class="toc-number">2.7.</span> <span class="toc-text">密钥分配 - 公钥分配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%86%E9%92%A5%E5%88%86%E9%85%8D-%E5%88%A9%E7%94%A8%E5%85%AC%E9%92%A5%E5%88%86%E9%85%8D%E4%BC%A0%E7%BB%9F%E5%AF%86%E7%A0%81%E7%9A%84%E5%AF%86%E9%92%A5"><span class="toc-number">2.8.</span> <span class="toc-text">密钥分配 - 利用公钥分配传统密码的密钥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A4%E8%AF%81%E6%8A%80%E6%9C%AF"><span class="toc-number">3.</span> <span class="toc-text">认证技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E5%8A%A0%E5%AF%86"><span class="toc-number">3.1.</span> <span class="toc-text">消息加密</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E8%AE%A4%E8%AF%81%E7%A0%81-mac"><span class="toc-number">3.2.</span> <span class="toc-text">消息认证码 MAC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hash"><span class="toc-number">3.3.</span> <span class="toc-text">Hash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hash%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.</span> <span class="toc-text">Hash 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D%E7%AE%97%E6%B3%95dss"><span class="toc-number">3.5.</span> <span class="toc-text">数字签名算法 DSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81"><span class="toc-number">3.6.</span> <span class="toc-text">电子身份认证</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">4.</span> <span class="toc-text">计算机网络安全体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E7%BA%BF%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">4.1.</span> <span class="toc-text">无线局域网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vpn"><span class="toc-number">4.2.</span> <span class="toc-text">VPN</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ipsec"><span class="toc-number">5.</span> <span class="toc-text">IPSec</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ipsec-%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.</span> <span class="toc-text">IPSec 体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ah"><span class="toc-number">5.2.</span> <span class="toc-text">AH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#esp"><span class="toc-number">5.3.</span> <span class="toc-text">ESP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E5%85%B3%E8%81%94%E7%BB%84%E5%90%88"><span class="toc-number">5.4.</span> <span class="toc-text">安全关联组合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ike"><span class="toc-number">5.5.</span> <span class="toc-text">IKE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ike-%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">5.6.</span> <span class="toc-text">IKE 体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ike-%E5%B7%A5%E4%BD%9C"><span class="toc-number">5.7.</span> <span class="toc-text">IKE 工作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AEssl"><span class="toc-number">6.</span> <span class="toc-text">传输层安全协议 SSL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B0%E5%BD%95%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.1.</span> <span class="toc-text">记录协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%A1%E6%89%8B%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.2.</span> <span class="toc-text">握手协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%8A%E8%AD%A6%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.3.</span> <span class="toc-text">告警协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81%E8%A7%84%E7%BA%A6%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.</span> <span class="toc-text">修改密码规约协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-number">6.5.</span> <span class="toc-text">安全性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http-ssl"><span class="toc-number">7.</span> <span class="toc-text">HTTP + SSL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#arp-%E6%AC%BA%E9%AA%97"><span class="toc-number">7.1.</span> <span class="toc-text">ARP 欺骗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#https"><span class="toc-number">7.2.</span> <span class="toc-text">HTTPS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ssl%E6%94%BB%E5%87%BB"><span class="toc-number">7.3.</span> <span class="toc-text">SSL 攻击</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set"><span class="toc-number">8.</span> <span class="toc-text">SET</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%98%93%E8%BF%87%E7%A8%8B"><span class="toc-number">8.1.</span> <span class="toc-text">交易过程</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/2024/01/29/cs/safety/safety/" rel="bookmark" title="计算机网络安全技术课程笔记">计算机网络安全技术课程笔记</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Linxin Xiao" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Linxin Xiao</p><div class="description" itemprop="description">Tsinghua University, Peking</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">6</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">4</span> <span class="name">分类</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Vra294aWFv" title="https:&#x2F;&#x2F;github.com&#x2F;ekkoxiao"><i class="ic i-github"></i></span> <span class="exturl item email" data-url="bWFpbHRvOnhseDIxQG1haWxzLnRzaW5naHVhLmVkdS5jbg==" title="mailto:xlx21@mails.tsinghua.edu.cn"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2024/01/29/cs/net/net/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2024/02/10/2024/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/cs/" title="分类于 计算机专业课程笔记">计算机专业课程笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/cs/dsa/" title="分类于 数据结构">数据结构</a></div><span><a href="/2024/01/28/cs/dsa/dsa/" title="数据结构课程笔记">数据结构课程笔记</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/cs/" title="分类于 计算机专业课程笔记">计算机专业课程笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/cs/net/" title="分类于 计算机网络原理">计算机网络原理</a></div><span><a href="/2024/01/29/cs/net/net/" title="计算机网络原理课程笔记">计算机网络原理课程笔记</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/cs/" title="分类于 计算机专业课程笔记">计算机专业课程笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/cs/safety/" title="分类于 网络安全技术">网络安全技术</a></div><span><a href="/2024/01/29/cs/safety/safety/" title="计算机网络安全技术课程笔记">计算机网络安全技术课程笔记</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/01/28/intro/" title="个人简介">个人简介</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/01/28/casual/" title="若颠木之有由蘖">若颠木之有由蘖</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/10/2024/" title="写在 2024 龙年的第一天">写在 2024 龙年的第一天</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Linxin Xiao @ Homepage for EkkoXiao</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">73k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">1:06</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2024/01/29/cs/safety/safety/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->